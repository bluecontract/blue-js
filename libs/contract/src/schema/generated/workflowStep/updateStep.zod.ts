// Generated by ts-to-zod
import { z } from 'zod';

import { baseBlueObjectSchema, blueObjectSchema } from '@blue-company/language';
import { workflowStepSchema } from './workflowStep.zod';
import { jsonPatchEntrySchema } from './../jsonPatch/jsonPatchEntry.zod';
import { contractBlueIdsSchema } from './../blueIds.zod';

const updateStepChangesetSchema = baseBlueObjectSchema.extend({
  items: z.array(jsonPatchEntrySchema).optional(),
});

export const updateStepSchema = workflowStepSchema.extend({
  type: blueObjectSchema
    .and(
      z.object({
        name: z.literal('Update Step').optional(),
        blueId: contractBlueIdsSchema.shape.UpdateStep.optional(),
      })
    )
    .optional(),
  changeset: updateStepChangesetSchema.optional(),
});
